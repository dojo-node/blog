// Generated by CoffeeScript 1.8.0
var Post, app, bodyParser, express, mongoose, port, post, router;

express = require('express');

mongoose = require('mongoose');

app = express();

bodyParser = require('body-parser');

Post = require('./app/models/post');

app.use(bodyParser.urlencoded({
  extended: true
}));

app.use(bodyParser.json());

port = process.env.PORT || 8080;

router = express.Router();

router.get('/', function(req, res) {
  res.json({
    message: 'hooray! welcome to our api!'
  });
});

app.use('/api', router);

app.listen(port);

console.log('Magic happens on port ' + port);

mongoose.connect('mongodb://localhost/test');

post = new Post;

post.title = 'Test 1';

post.author = 'Test 2';

post.description = 'Test 3';

post.save(function(err) {
  if (err != null) {
    return console.log(err);
  } else {
    return console.log("new post created!!!");
  }
});
